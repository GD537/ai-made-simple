<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>üé≠ AI Made Simple - Enhanced v2.0</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh;
            color: #e4e4e7;
            overflow-x: hidden;
        }
        
        .container { 
            max-width: 1400px; 
            margin: 0 auto; 
            padding: 1rem; 
        }
        
        /* Header */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(0, 212, 255, 0.3);
            margin-bottom: 2rem;
        }
        
        .logo {
            font-size: 2rem;
            font-weight: bold;
            background: linear-gradient(90deg, #00d4ff, #7c3aed, #f59e0b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .version {
            background: rgba(0, 212, 255, 0.2);
            color: #00d4ff;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
        }
        
        /* Main Grid */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 2rem;
        }
        
        @media (max-width: 1024px) {
            .main-grid { 
                grid-template-columns: 1fr; 
                gap: 1rem; 
            }
        }
        
        /* Face Swap Section */
        .face-swap-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 16px;
            padding: 2rem;
            backdrop-filter: blur(10px);
        }
        
        .section-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
            color: #00d4ff;
            text-align: center;
        }
        
        /* Upload Areas */
        .upload-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        @media (max-width: 768px) {
            .upload-grid { grid-template-columns: 1fr; }
        }
        
        .upload-area {
            position: relative;
            border: 2px dashed rgba(0, 212, 255, 0.5);
            border-radius: 12px;
            padding: 2rem 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(0, 0, 0, 0.2);
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .upload-area:hover {
            border-color: #00d4ff;
            background: rgba(0, 212, 255, 0.1);
        }
        
        .upload-area.dragover {
            border-color: #7c3aed;
            background: rgba(124, 58, 237, 0.2);
        }
        
        .upload-area.has-image {
            border-color: #22c55e;
            border-style: solid;
        }
        
        .upload-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.7;
        }
        
        .upload-text {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }
        
        .upload-subtext {
            font-size: 0.9rem;
            opacity: 0.7;
            margin-bottom: 1rem;
        }
        
        .file-input {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        
        /* Preview Images */
        .preview-image {
            max-width: 100%;
            max-height: 150px;
            border-radius: 8px;
            margin-top: 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        /* Quality Analysis */
        .quality-analysis {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
        }
        
        .quality-good {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.5);
            color: #22c55e;
        }
        
        .quality-warning {
            background: rgba(245, 158, 11, 0.2);
            border: 1px solid rgba(245, 158, 11, 0.5);
            color: #f59e0b;
        }
        
        .quality-error {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.5);
            color: #ef4444;
        }
        
        /* Live Preview Section */
        .live-preview {
            margin: 2rem 0;
            padding: 1.5rem;
            border: 1px solid rgba(124, 58, 237, 0.5);
            border-radius: 12px;
            background: rgba(124, 58, 237, 0.1);
            text-align: center;
        }
        
        .preview-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #a855f7;
            margin-bottom: 1rem;
        }
        
        .preview-canvas {
            max-width: 100%;
            border-radius: 8px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
            margin-bottom: 1rem;
        }
        
        .preview-status {
            padding: 0.75rem;
            border-radius: 8px;
            margin-top: 1rem;
            font-weight: 500;
        }
        
        /* Action Buttons */
        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 2rem;
        }
        
        @media (max-width: 768px) {
            .action-buttons { grid-template-columns: 1fr; }
        }
        
        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #7c3aed, #a855f7);
            color: white;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #6d28d9, #9333ea);
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: rgba(0, 212, 255, 0.2);
            color: #00d4ff;
            border: 1px solid rgba(0, 212, 255, 0.5);
        }
        
        .btn-secondary:hover {
            background: rgba(0, 212, 255, 0.3);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        
        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Sidebar */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .widget {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
        }
        
        .widget-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #00d4ff;
        }
        
        .feature-list {
            list-style: none;
        }
        
        .feature-list li {
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .feature-list li:last-child {
            border-bottom: none;
        }
        
        .feature-list li::before {
            content: "‚ú®";
            margin-right: 0.5rem;
        }
        
        /* Tips */
        .tips {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 12px;
            padding: 1rem;
            margin-top: 1rem;
        }
        
        .tips h4 {
            color: #f59e0b;
            margin-bottom: 0.5rem;
        }
        
        .tips ul {
            list-style-type: disc;
            margin-left: 1rem;
        }
        
        .tips li {
            margin: 0.25rem 0;
            font-size: 0.9rem;
        }
        
        /* Results Section */
        .results-section {
            margin-top: 2rem;
            padding: 2rem;
            border: 1px solid rgba(34, 197, 94, 0.5);
            border-radius: 16px;
            background: rgba(34, 197, 94, 0.1);
            text-align: center;
            display: none;
        }
        
        .results-section.show {
            display: block;
        }
        
        .result-image {
            max-width: 100%;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
            margin: 1rem 0;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container { padding: 0.5rem; }
            .face-swap-section { padding: 1rem; }
            .upload-area { padding: 1.5rem 1rem; min-height: 150px; }
            .upload-icon { font-size: 2rem; }
            .btn { padding: 0.75rem 1.5rem; font-size: 1rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">üé≠ AI Made Simple</div>
            <div class="version">Enhanced v2.0</div>
        </header>

        <div class="main-grid">
            <div class="face-swap-section">
                <h2 class="section-title">üöÄ Enhanced Face Swap with Live Preview</h2>
                
                <div class="upload-grid">
                    <!-- Source Face Upload -->
                    <div class="upload-area" id="sourceUpload">
                        <input type="file" class="file-input" id="sourceFile" accept="image/*">
                        <div class="upload-icon">üë§</div>
                        <div class="upload-text">Source Face</div>
                        <div class="upload-subtext">Upload the face you want to use</div>
                        <div class="upload-subtext">üì± Tap to select or drag & drop</div>
                    </div>
                    
                    <!-- Target Image Upload -->
                    <div class="upload-area" id="targetUpload">
                        <input type="file" class="file-input" id="targetFile" accept="image/*">
                        <div class="upload-icon">üñºÔ∏è</div>
                        <div class="upload-text">Target Image</div>
                        <div class="upload-subtext">Upload the image to modify</div>
                        <div class="upload-subtext">üì± Tap to select or drag & drop</div>
                    </div>
                </div>

                <!-- Live Preview -->
                <div class="live-preview" id="livePreview" style="display: none;">
                    <h3 class="preview-title">‚ö° Live Preview</h3>
                    <canvas id="previewCanvas" class="preview-canvas"></canvas>
                    <div id="previewStatus" class="preview-status"></div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button class="btn btn-secondary" id="previewBtn" disabled>
                        <span>üëÅÔ∏è Generate Preview</span>
                    </button>
                    <button class="btn btn-primary" id="swapBtn" disabled>
                        <span id="swapBtnText">üé≠ Create High Quality</span>
                        <div class="loading" id="loadingSpinner" style="display: none;"></div>
                    </button>
                </div>

                <!-- Quality Tips -->
                <div class="tips">
                    <h4>üí° Tips for Best Results</h4>
                    <ul>
                        <li>Use clear, well-lit photos where faces take up at least 1/4 of the image</li>
                        <li>Ensure faces are looking towards the camera (not profile views)</li>
                        <li>Higher resolution images (800px+) produce better results</li>
                        <li>Avoid blurry, dark, or heavily filtered photos</li>
                        <li>Mobile photos work great - just make sure faces are clearly visible</li>
                    </ul>
                </div>
            </div>

            <div class="sidebar">
                <!-- Features Widget -->
                <div class="widget">
                    <h3 class="widget-title">‚ú® Enhanced Features</h3>
                    <ul class="feature-list">
                        <li>Real-time preview before processing</li>
                        <li>Advanced face blending technology</li>
                        <li>Automatic image quality analysis</li>
                        <li>Smart error detection & suggestions</li>
                        <li>Mobile-optimized touch interface</li>
                        <li>Auto-rotation for mobile photos</li>
                        <li>Multi-face detection & processing</li>
                        <li>Color matching for natural results</li>
                    </ul>
                </div>

                <!-- Status Widget -->
                <div class="widget">
                    <h3 class="widget-title">üìä Processing Status</h3>
                    <div id="statusWidget">
                        <p>üì§ Ready for upload</p>
                        <p style="margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.7;">
                            Upload your source face and target image to begin
                        </p>
                    </div>
                </div>

                <!-- Results Widget -->
                <div class="widget" id="resultsWidget" style="display: none;">
                    <h3 class="widget-title">üéâ Results Ready</h3>
                    <div id="resultContent"></div>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <div class="results-section" id="resultsSection">
            <h2>üé≠ Face Swap Complete!</h2>
            <img id="resultImage" class="result-image" alt="Swapped Result">
            <div style="margin-top: 1rem;">
                <button class="btn btn-primary" id="downloadBtn">
                    üì• Download Result
                </button>
                <button class="btn btn-secondary" id="newSwapBtn" style="margin-left: 1rem;">
                    üîÑ Create Another
                </button>
            </div>
        </div>
    </div>

    <script>
        class EnhancedFaceSwapper {
            constructor() {
                this.sourceFile = null;
                this.targetFile = null;
                this.previewCanvas = document.getElementById('previewCanvas');
                this.ctx = this.previewCanvas.getContext('2d');
                
                this.initializeEventListeners();
            }
            
            initializeEventListeners() {
                // File upload handling
                document.getElementById('sourceFile').addEventListener('change', (e) => {
                    this.handleFileSelect(e, 'source');
                });
                
                document.getElementById('targetFile').addEventListener('change', (e) => {
                    this.handleFileSelect(e, 'target');
                });
                
                // Drag and drop
                this.setupDragAndDrop();
                
                // Buttons
                document.getElementById('previewBtn').addEventListener('click', () => {
                    this.generatePreview();
                });
                
                document.getElementById('swapBtn').addEventListener('click', () => {
                    this.performFaceSwap();
                });
                
                document.getElementById('newSwapBtn').addEventListener('click', () => {
                    this.resetInterface();
                });
                
                // Paste from clipboard
                document.addEventListener('paste', (e) => {
                    this.handlePaste(e);
                });
            }
            
            setupDragAndDrop() {
                ['sourceUpload', 'targetUpload'].forEach(id => {
                    const area = document.getElementById(id);
                    
                    area.addEventListener('dragover', (e) => {
                        e.preventDefault();
                        area.classList.add('dragover');
                    });
                    
                    area.addEventListener('dragleave', () => {
                        area.classList.remove('dragover');
                    });
                    
                    area.addEventListener('drop', (e) => {
                        e.preventDefault();
                        area.classList.remove('dragover');
                        
                        const files = e.dataTransfer.files;
                        if (files.length > 0) {
                            const type = id === 'sourceUpload' ? 'source' : 'target';
                            this.processFile(files[0], type);
                        }
                    });
                });
            }
            
            handleFileSelect(event, type) {
                const file = event.target.files[0];
                if (file) {
                    this.processFile(file, type);
                }
            }
            
            handlePaste(event) {
                const items = event.clipboardData.items;
                for (let item of items) {
                    if (item.type.indexOf('image') !== -1) {
                        const file = item.getAsFile();
                        // Auto-detect if it should be source or target
                        const type = this.sourceFile ? 'target' : 'source';
                        this.processFile(file, type);
                        break;
                    }
                }
            }
            
            async processFile(file, type) {
                // Validate file
                if (!file.type.match(/image.*/)) {
                    this.showError(`Please select an image file (JPG, PNG, etc.)`);
                    return;
                }
                
                if (file.size > 50 * 1024 * 1024) { // 50MB limit
                    this.showError('File too large. Please use images smaller than 50MB.');
                    return;
                }
                
                // Store file
                if (type === 'source') {
                    this.sourceFile = file;
                } else {
                    this.targetFile = file;
                }
                
                // Update UI
                await this.updateUploadArea(file, type);
                await this.analyzeImage(file, type);
                this.updateButtons();
                this.updateStatus();
            }
            
            async updateUploadArea(file, type) {
                const uploadArea = document.getElementById(type + 'Upload');
                uploadArea.classList.add('has-image');
                
                // Create preview
                const img = new Image();
                img.onload = () => {
                    // Clear existing content
                    const existingPreview = uploadArea.querySelector('.preview-image');
                    if (existingPreview) {
                        existingPreview.remove();
                    }
                    
                    // Add new preview
                    img.className = 'preview-image';
                    uploadArea.appendChild(img);
                    
                    // Update text
                    const uploadText = uploadArea.querySelector('.upload-text');
                    uploadText.textContent = type === 'source' ? '‚úÖ Source Face Loaded' : '‚úÖ Target Image Loaded';
                    
                    const uploadSubtext = uploadArea.querySelector('.upload-subtext');
                    uploadSubtext.textContent = `${(file.size / 1024 / 1024).toFixed(1)}MB - Tap to change`;
                };
                
                img.src = URL.createObjectURL(file);
            }
            
            async analyzeImage(file, type) {
                // Simulate image quality analysis
                // In production, this would call the backend API
                
                const uploadArea = document.getElementById(type + 'Upload');
                let analysisDiv = uploadArea.querySelector('.quality-analysis');
                
                if (!analysisDiv) {
                    analysisDiv = document.createElement('div');
                    analysisDiv.className = 'quality-analysis';
                    uploadArea.appendChild(analysisDiv);
                }
                
                // Show loading
                analysisDiv.innerHTML = 'üîç Analyzing image quality...';
                analysisDiv.className = 'quality-analysis quality-warning';
                
                // Simulate analysis delay
                await this.sleep(1000);
                
                // Mock analysis result based on file size and type
                const isGoodQuality = file.size > 100 * 1024 && file.type.includes('jpeg');
                
                if (isGoodQuality) {
                    analysisDiv.className = 'quality-analysis quality-good';
                    analysisDiv.innerHTML = `
                        ‚úÖ <strong>Excellent Quality</strong><br>
                        üìè Resolution: Good<br>
                        üë§ Face detected: Yes<br>
                        üí° Ready for processing
                    `;
                } else {
                    analysisDiv.className = 'quality-analysis quality-warning';
                    analysisDiv.innerHTML = `
                        ‚ö†Ô∏è <strong>Acceptable Quality</strong><br>
                        üí° Tips: Use higher resolution for best results<br>
                        üì± Mobile photos work well<br>
                        üë§ Ensure face is clearly visible
                    `;
                }
            }
            
            updateButtons() {
                const previewBtn = document.getElementById('previewBtn');
                const swapBtn = document.getElementById('swapBtn');
                
                const hasFiles = this.sourceFile && this.targetFile;
                
                previewBtn.disabled = !hasFiles;
                swapBtn.disabled = !hasFiles;
                
                if (hasFiles) {
                    previewBtn.innerHTML = '<span>üëÅÔ∏è Generate Preview</span>';
                    swapBtn.innerHTML = '<span>üé≠ Create High Quality</span>';
                }
            }
            
            updateStatus() {
                const statusWidget = document.getElementById('statusWidget');
                
                let status = '';
                let description = '';
                
                if (!this.sourceFile && !this.targetFile) {
                    status = 'üì§ Ready for upload';
                    description = 'Upload your source face and target image to begin';
                } else if (this.sourceFile && !this.targetFile) {
                    status = 'üë§ Source face loaded';
                    description = 'Now upload the target image to modify';
                } else if (!this.sourceFile && this.targetFile) {
                    status = 'üñºÔ∏è Target image loaded';
                    description = 'Now upload the source face to use';
                } else {
                    status = '‚úÖ Ready to process';
                    description = 'Both images loaded. Generate preview or create high quality result';
                }
                
                statusWidget.innerHTML = `
                    <p>${status}</p>
                    <p style="margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.7;">
                        ${description}
                    </p>
                `;
            }
            
            async generatePreview() {
                const previewBtn = document.getElementById('previewBtn');
                const livePreview = document.getElementById('livePreview');
                const previewStatus = document.getElementById('previewStatus');
                
                // Show loading
                previewBtn.innerHTML = '<div class="loading"></div> Generating Preview...';
                previewBtn.disabled = true;
                livePreview.style.display = 'block';
                previewStatus.className = 'preview-status quality-warning';
                previewStatus.textContent = 'üîÑ Creating preview... This may take a few seconds';
                
                try {
                    // Simulate preview generation
                    await this.sleep(2000);
                    
                    // Create mock preview by compositing images
                    await this.createMockPreview();
                    
                    previewStatus.className = 'preview-status quality-good';
                    previewStatus.textContent = '‚úÖ Preview ready! This is a quick preview - use "Create High Quality" for best results';
                    
                } catch (error) {
                    previewStatus.className = 'preview-status quality-error';
                    previewStatus.textContent = '‚ùå Preview failed. You can still try the high quality processing.';
                } finally {
                    previewBtn.innerHTML = '<span>üëÅÔ∏è Generate Preview</span>';
                    previewBtn.disabled = false;
                }
            }
            
            async createMockPreview() {
                // Load and composite images for preview
                const sourceImg = await this.loadImage(this.sourceFile);
                const targetImg = await this.loadImage(this.targetFile);
                
                // Set canvas size
                this.previewCanvas.width = Math.min(targetImg.width, 512);
                this.previewCanvas.height = Math.min(targetImg.height, 512);
                
                // Draw target image
                this.ctx.drawImage(targetImg, 0, 0, this.previewCanvas.width, this.previewCanvas.height);
                
                // Add overlay text (mock preview)
                this.ctx.fillStyle = 'rgba(0, 212, 255, 0.8)';
                this.ctx.font = 'bold 16px Arial';
                this.ctx.fillRect(10, 10, 200, 30);
                this.ctx.fillStyle = 'white';
                this.ctx.fillText('üé≠ Preview (Low Quality)', 15, 30);
            }
            
            async performFaceSwap() {
                const swapBtn = document.getElementById('swapBtn');
                const swapBtnText = document.getElementById('swapBtnText');
                const loadingSpinner = document.getElementById('loadingSpinner');
                const statusWidget = document.getElementById('statusWidget');
                
                // Show loading state
                swapBtn.disabled = true;
                swapBtnText.style.display = 'none';
                loadingSpinner.style.display = 'inline-block';
                
                statusWidget.innerHTML = `
                    <p>üîÑ Processing face swap...</p>
                    <p style="margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.7;">
                        This may take 5-15 seconds for high quality results
                    </p>
                `;
                
                try {
                    // Simulate processing time
                    await this.sleep(3000);
                    
                    // Create final result
                    const resultUrl = await this.createFinalResult();
                    
                    // Show results
                    this.showResults(resultUrl);
                    
                } catch (error) {
                    this.showError('Face swap failed: ' + error.message);
                } finally {
                    // Reset button
                    swapBtn.disabled = false;
                    swapBtnText.style.display = 'inline';
                    loadingSpinner.style.display = 'none';
                }
            }
            
            async createFinalResult() {
                // Create final composite image
                const targetImg = await this.loadImage(this.targetFile);
                
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                canvas.width = targetImg.width;
                canvas.height = targetImg.height;
                
                // Draw target image
                ctx.drawImage(targetImg, 0, 0);
                
                // Add "swapped" overlay (mock result)
                ctx.fillStyle = 'rgba(124, 58, 237, 0.1)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.fillStyle = 'rgba(124, 58, 237, 0.8)';
                ctx.font = 'bold 24px Arial';
                const text = 'üé≠ AI Face Swap Result';
                const metrics = ctx.measureText(text);
                const x = (canvas.width - metrics.width) / 2;
                const y = 50;
                
                ctx.fillRect(x - 10, y - 30, metrics.width + 20, 40);
                ctx.fillStyle = 'white';
                ctx.fillText(text, x, y);
                
                return canvas.toDataURL('image/jpeg', 0.9);
            }
            
            showResults(resultUrl) {
                const resultsSection = document.getElementById('resultsSection');
                const resultImage = document.getElementById('resultImage');
                const resultsWidget = document.getElementById('resultsWidget');
                const downloadBtn = document.getElementById('downloadBtn');
                
                // Show result image
                resultImage.src = resultUrl;
                resultsSection.classList.add('show');
                
                // Update results widget
                resultsWidget.style.display = 'block';
                resultsWidget.innerHTML = `
                    <h3 class="widget-title">üéâ Success!</h3>
                    <p>‚úÖ Face swap completed</p>
                    <p style="margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.7;">
                        High quality result ready for download
                    </p>
                `;
                
                // Setup download
                downloadBtn.onclick = () => {
                    const link = document.createElement('a');
                    link.download = 'ai-face-swap-result.jpg';
                    link.href = resultUrl;
                    link.click();
                };
                
                // Update status
                const statusWidget = document.getElementById('statusWidget');
                statusWidget.innerHTML = `
                    <p>üéâ Swap complete!</p>
                    <p style="margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.7;">
                        Your enhanced result is ready
                    </p>
                `;
                
                // Scroll to results
                resultsSection.scrollIntoView({ behavior: 'smooth' });
            }
            
            resetInterface() {
                // Clear files
                this.sourceFile = null;
                this.targetFile = null;
                
                // Reset upload areas
                ['sourceUpload', 'targetUpload'].forEach(id => {
                    const area = document.getElementById(id);
                    area.classList.remove('has-image');
                    
                    const preview = area.querySelector('.preview-image');
                    if (preview) preview.remove();
                    
                    const analysis = area.querySelector('.quality-analysis');
                    if (analysis) analysis.remove();
                    
                    // Reset text
                    const uploadText = area.querySelector('.upload-text');
                    const uploadSubtext = area.querySelector('.upload-subtext');
                    
                    if (id === 'sourceUpload') {
                        uploadText.textContent = 'Source Face';
                        uploadSubtext.textContent = 'Upload the face you want to use';
                    } else {
                        uploadText.textContent = 'Target Image';
                        uploadSubtext.textContent = 'Upload the image to modify';
                    }
                });
                
                // Reset file inputs
                document.getElementById('sourceFile').value = '';
                document.getElementById('targetFile').value = '';
                
                // Hide sections
                document.getElementById('livePreview').style.display = 'none';
                document.getElementById('resultsSection').classList.remove('show');
                document.getElementById('resultsWidget').style.display = 'none';
                
                // Update interface
                this.updateButtons();
                this.updateStatus();
                
                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
            
            async loadImage(file) {
                return new Promise((resolve) => {
                    const img = new Image();
                    img.onload = () => resolve(img);
                    img.src = URL.createObjectURL(file);
                });
            }
            
            sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
            
            showError(message) {
                alert('Error: ' + message);
            }
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', () => {
            new EnhancedFaceSwapper();
            
            // Add some visual flair
            document.body.style.opacity = '0';
            setTimeout(() => {
                document.body.style.transition = 'opacity 0.5s ease';
                document.body.style.opacity = '1';
            }, 100);
        });
    </script>
</body>
</html>